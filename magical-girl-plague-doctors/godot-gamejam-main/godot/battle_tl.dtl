audio music "res://audio/Anime_Battle.ogg"
[background arg="res://art/BG/GGJ_PlagueGirls_BGInterior.png" fade="0.5" wait="true"]
join Mia (transformed) left [animation="Slide From Left" length="1.0"]
join Aylin (transformed) leftmost [animation="Slide From Left" length="1.0"]
join foe rightmost [animation="Slide From Left" length="1.0"]
A wild Unwell Customer appeared!
[signal arg="battle_start"]
label Next Turn
if {playerWin} == true:
	jump Win
elif {gameOver} == true:
	jump Game Over
[signal arg="nextTurn"]
[signal arg="checkCharacter"]
if {currentCharacter}  ==  "Aylin":
	It's {currentCharacter}'s turn!   ...   What will {currentCharacter} do?\
	(   Aylin âš¡\: {aylinEnergy}   ) (   Mia âš¡\: {miaEnergy}   ) (   Health â¤ï¸\: {playerHealth}   )
	set {mGirlIndex} = 0
elif {currentCharacter}  ==  "Mia":
	set {mGirlIndex} = 1
	It's {currentCharacter}'s turn!   ...   What will {currentCharacter} do?\
	(   Aylin âš¡\: {aylinEnergy}   ) (   Mia âš¡\: {miaEnergy}   ) (   Health â¤ï¸\: {playerHealth}   )
elif {currentCharacter} == "Infected":
	set {enemyIndex} = 0
	The enemy's turn!
	[wait time="0.5"]
	[signal arg="enemy action"]
	update foe [animation="Shake X"]
	jump End Turn
label Magical Girl Actions
if {currentCharacter} == "Aylin":
	label Aylin Repick
	- ðŸ›¡ï¸ Defend ( 0âš¡)
		set {takeAction} = 0
		set {targetPlayer} = true
		set {targetIndex} = {mGirlIndex}
		jump Skip Target
	- ðŸ”½ Briar Thicket Filtration ( 25âš¡) | [if {aylinEnergy} >= 25]
		if {aylinEnergy} >= 25:
			set {takeAction} = 1
		else:
			Not enough energy!
			jump Aylin Repick
	- ðŸ›¡ï¸ Electrostatic Petal Seal ( 25âš¡) | [if {aylinEnergy} >= 25]
		if {aylinEnergy} >= 25:
			set {takeAction} = 2
		else:
			Not enough energy!
			jump Aylin Repick
	- âš”ï¸ Radiant Inoculation Beam ( 50âš¡) | [if {aylinEnergy} >= 50]
		if {aylinEnergy} >= 50:
			set {takeAction} = 3
		else:
			Not enough energy!
			jump Aylin Repick
	- âš”ï¸ Incandescent Antioxidant ( 80âš¡) | [if {aylinEnergy} >= 80]
		if {aylinEnergy} >= 80:
			set {takeAction} = 4
		else:
			Not enough energy!
			jump Aylin Repick
elif {currentCharacter} == "Mia":
	label Mia Repick
	- ðŸ›¡ï¸ Defend ( 0âš¡)
		set {takeAction} = 0
		set {targetPlayer} = true
		set {targetIndex} = {mGirlIndex}
		jump Skip Target
	- âš”ï¸ Breath of Cleansing Gust ( 20âš¡) | [if {miaEnergy} >= 20]
		if {miaEnergy} >= 20:
			set {takeAction} = 1
		else:
			Not enough energy!
			jump Mia Repick
	- â¤ï¸â€ðŸ©¹ Sparkling Hot Soup ( 45âš¡) | [if {miaEnergy} >= 45]
		if {miaEnergy} >= 45:
			set {takeAction} = 2
		else:
			Not enough energy!
			jump Mia Repick
	- ðŸ”¼ Lustrous Bloom of Wellness ( 40âš¡) | [if {miaEnergy} >= 40]
		if {miaEnergy} >= 40:
			set {takeAction} = 3
		else:
			Not enough energy!
			jump Mia Repick
	- â¤ï¸â€ðŸ©¹ Resplendent Flower Burst ( 80âš¡) | [if {miaEnergy} >= 80]
		if {miaEnergy} >= 80:
			set {takeAction} = 4
		else:
			Not enough energy!
			jump Mia Repick
Target?
- Enemy
	set {targetPlayer} = false
	set {targetIndex} = 0
- Aylin
	set {targetPlayer} = true
	set {targetIndex} = 0
- Mia
	set {targetPlayer} = true
	set {targetIndex} = 1
- Back
	[clear time="0.5" step="false" portraits="false" music="false" background="false" positions="false" style="false"]
label Skip Target
[signal arg="mGirl action"]
[signal arg="updateUI"]
[wait time="1.0"]
label End Turn
if {currentCharacter} == "Aylin":
	update Aylin [animation="Shake X"]
	if {takeAction} == 1:
		audio "res://audio/VoLines/briar thicket filtration-001.wav"
		update foe [animation="Shake X"]
	if {takeAction} == 2:
		audio "res://audio/VoLines/electrostatic petal-001.wav"
	if {takeAction} == 3:
		audio "res://audio/VoLines/radiant innoculation beam-001.wav"
		update foe [animation="Shake X"]
	if {takeAction} == 4:
		audio "res://audio/VoLines/incandescent antioxidant-001.wav"
		update foe [animation="Shake X"]
elif {currentCharacter} == "Mia":
	update Mia [animation="Shake X"]
	if {takeAction} == 1:
		audio "res://audio/VoLines/breath of cleansing gust-003.wav"
		update foe [animation="Shake X"]
	if {takeAction} == 2:
		audio "res://audio/VoLines/sparkling hot soup-002.wav"
	if {takeAction} == 3:
		audio "res://audio/VoLines/lustrous bloom of wellness-001.wav"
	if {takeAction} == 4:
		audio "res://audio/VoLines/resplendent flower burst-001.wav"
		update foe [animation="Shake X"]
{battleComment}
[signal arg="endTurn"]
jump Next Turn
[end_timeline]
label Win
leave foe [animation="Fade Out Down" length="1.5" wait="true"]
jump victory/
[end_timeline]
label Game Over
leave Aylin [animation="Fade Out Down" length="1.5"]
leave Mia [animation="Fade Out Down" length="1.5" wait="true"]
[signal arg="hide_health"]
Our heroes were defeated by their foe! Oh no!\
\
- Game Over -
[signal arg=""restart_game"]
[end_timeline]
[clear time="1.5"]
jump intro/